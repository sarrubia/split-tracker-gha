"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LatenciesCacheInRedis = void 0;
var findLatencyIndex_1 = require("../findLatencyIndex");
var LatenciesCacheInRedis = /** @class */ (function () {
    function LatenciesCacheInRedis(keys, redis) {
        this.keys = keys;
        this.redis = redis;
    }
    LatenciesCacheInRedis.prototype.track = function (metricName, latency) {
        var bucketNumber = (0, findLatencyIndex_1.findLatencyIndex)(latency);
        return this.redis.incr(this.keys.buildLatencyKey(metricName, bucketNumber)).catch(function () {
            // noop, for telemetry metrics there's no need to throw.
        }).then(function () { return true; });
    };
    return LatenciesCacheInRedis;
}());
exports.LatenciesCacheInRedis = LatenciesCacheInRedis;
