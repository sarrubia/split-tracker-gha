import { findLatencyIndex } from '../findLatencyIndex';
var LatenciesCacheInRedis = /** @class */ (function () {
    function LatenciesCacheInRedis(keys, redis) {
        this.keys = keys;
        this.redis = redis;
    }
    LatenciesCacheInRedis.prototype.track = function (metricName, latency) {
        var bucketNumber = findLatencyIndex(latency);
        return this.redis.incr(this.keys.buildLatencyKey(metricName, bucketNumber)).catch(function () {
            // noop, for telemetry metrics there's no need to throw.
        }).then(function () { return true; });
    };
    return LatenciesCacheInRedis;
}());
export { LatenciesCacheInRedis };
